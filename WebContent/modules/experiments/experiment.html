<h3>
{{'Experiment'|translate}} {{'no.'|translate}} {{experimentCtrl.experiment.number}} : 
{{experimentCtrl.experiment.trname}}
</h3>
{{'created by'|translate}} {{experimentCtrl.experiment.creator}}
<br />
<br />
		<!-- Parameters -->
		<h4>{{'Parameters'|translate}}</h4>
		<table class="table">
			<tr ng-repeat="parameter in experimentCtrl.experiment.parameters 
						   | orderBy : experimentCtrl.experiment.parameters.pos" 
			ng-dblclick="parameter.editing=true; newValue=parameter.value">
				<td>
				    {{parameter.trname}} :
				</td>
				<td >
					<span ng-hide="parameter.editing">{{parameter.value}}
					</span>
					<input 						   
						ng-keyup="experimentCtrl.keyUp($event.keyCode,newValue,parameter)"
						ng-show="parameter.editing" type="text"
					    ng-model="newValue" 
					    ng-blur="parameter.editing=false">
					{{parameter.unit.length>0?parameter.unit:''}}
				</td>
			</tr>
			<tr>
				<td></td>
				<td></td>
			</tr>
			<!-- um letzten Strich in Tabelle zu erzeugen -->
		</table>
		
		
		
		<!-- processes -->
		<h4>{{'Processes'|translate}}</h4>
		
			<ol ng-show="experimentCtrl.editmode!='true'" 
				ng-repeat="sample in experimentCtrl.experiment.samples | orderBy : 'position'" 
				class="exp_ol">
			<li class="exp_li"> 
			
				<ol class="exp_ol2" >
					<li class="exp_li2 title"> {{'Sample'|translate}} </li>
					<li class="exp_li2 button_li">
						<div class="dropdown" dropdown on-toggle="toggled(open)">
							<button class="btn btn-default" ui-sref="sample({sampleID:sample.sampleid})" >
								{{experimentCtrl.getSampleType(sample)}} {{sample.name}}
							</button>
					
	  				 	</div>
					</li>
				</ol>
			</li>
			<li class="exp_li noleftborder"> 
				<ol class="exp_ol2">
					<li class="exp_li2 title "> {{'Comment'|translate}}</li>
					<li class="exp_li2 button_li" >{{sample.trnote}}</li>
				</ol>
			</li>
			<li class="exp_li noleftborder" ng-repeat="process in sample.mprocesses"> 
				<ol class="exp_ol2">
					<li class="exp_li2 title ">&nbsp;
						{{experimentCtrl.getProcessType({"processtype":process.pprocess.processtype})}}
						<span ng-show="process.pprocess.note">
							({{process.pprocess.trnote}})
						</span>
					</li>
					<li class="exp_li2 button_li green"> 
						<button class="btn btn-default" 
								ui-sref="process({processID:process.fprocess.processid})" 
								ng-show=process.fprocess.number>
							{{experimentCtrl.getProcessType({"processtype":process.fprocess.processtype})}} 
							{{process.fprocess.number}}
						</button>
					</li>
				</ol>
			</li>
		</ol>
		
		
		<!-- editmode -->
		<div  ng-show="experimentCtrl.editmode=='true'" style="overflow: auto; width:'100%';" >
			<div ng-style="experimentCtrl.getWidth()">
				<table class="exptable"> 
					<tr>
						<td class="exptdtitle"> {{'Sample'|translate}} </td>
						<td class="exptdtitle"> {{'Comment'|translate}}</td>
						<td class="exptdtitle" 
							ng-repeat="process in  experimentCtrl.experiment.processes | orderBy : 'position'">
							<div style="white-space: nowrap">
								<!-- move process left -->
								<button ng-hide=$first type="button" class="btn btn-default btn-xs pull-left"
										ng-click="experimentCtrl.moveProcessLeft(process)"> 
							    	&#9668;
							    </button>
								<!--  <span class="glyphicon glyphicon-menu-hamburger sideways"></span>  -->
								<button type="button" class="btn btn-default btn-xs" 
										ng-click="experimentCtrl.deleteProcess(process)">
										<span class="glyphicon glyphicon-remove"></span>
								</button>
								{{experimentCtrl.getProcessType(process)}}
								
								<!-- move process right -->
								<button  ng-hide=$last type="button" class="btn btn-default btn-xs pull-right" 
										 ng-click="experimentCtrl.moveProcessRight(process)"> 
										 &#9658;
								</button>
							</div>
						</td>
						<td class="dropdown" dropdown on-toggle="toggled(open)">
							&nbsp;
							<button type="button" class="btn btn-default btn-xs dropdown-toggle" dropdown-toggle>
								<b>+</b> {{'Add process'|translate}}
							</button>
							<ul class="dropdown-menu">
					        	<li ng-repeat="processtype in experimentCtrl.avProcesses">
					          		<a ng-click="experimentCtrl.addProcessToExperiment(processtype)">
					          			{{processtype.trname}}
					          		
					          		</a>
					        	</li>
							</ul>
						</td>
					</tr>	
					
					<tr ng-repeat="sample in experimentCtrl.experiment.samples | orderBy : 'position'" >
						<td class="exptd" >
							<span style="white-space: nowrap">
							<span class="glyphicon glyphicon-menu-hamburger">&nbsp;</span>
							
							<button type="button" class="btn btn-default btn-xs" 
									ng-click="experimentCtrl.replaceSample(sample)">
			 						<span class="glyphicon glyphicon-transfer"></span>
							</button>
							
							<button type="button" class="btn btn-default btn-xs" 
									ng-click="experimentCtrl.deleteSample(sample)">
								<span class="glyphicon glyphicon-remove"></span>
							</button>
								{{experimentCtrl.getSampleType(sample)}} {{sample.name}}
							</span>
			  			</td>
			  			
				  		<td class="exptd" ng-dblclick="sample.editing=true; newValue=sample.trnote">
				  			<span ng-hide="sample.editing">
							 	  {{sample.trnote}}
							</span>
							<input 						   
								ng-keyup="experimentCtrl.commentKeyUp($event.keyCode,newValue,sample)"
								ng-show="sample.editing" type="text"
							    ng-model="newValue" 
							    ng-blur="sample.editing=false">
				  		</td>
				  		
				  		<td class="exptd" 
				  			ng-repeat="process in  experimentCtrl.experiment.processes | orderBy : 'position'">
				  			<span style="white-space: nowrap">
				  			<input type="checkbox" 
				  				   ng-checked="experimentCtrl.getPlannedProcess(process,sample.pprocesses)"
				  				   ng-click="experimentCtrl.changeProcessStep($event, process,sample)">
		            		<select class="input-sm"
			            		ng-show="{{experimentCtrl.getPlannedProcess(process,sample.pprocesses)}}"
			            		ng-model="experimentCtrl.getPlannedProcess(process,sample.pprocesses).recipe" 
			            		ng-options="r.id as r.trname for r in experimentCtrl.getProcessRecipes(process)"
			            		ng-change="experimentCtrl.changeRecipe(experimentCtrl.getPlannedProcess(process,sample.pprocesses))">
			            		<option value="">-</option>
			            	</select>
			            	</span>
			            	<span>
			            	<span  ng-dblclick="experimentCtrl.getPlannedProcess(process,sample.pprocesses).edit=true;
			            		   newValue=experimentCtrl.getPlannedProcess(process,sample.pprocesses).trnote"
			            		   style="display: inline-block;"
			            		   ng-show="{{experimentCtrl.getPlannedProcess(process,sample.pprocesses)}}">
				            	(
			            		<input 						   
								ng-keyup="experimentCtrl.commentKeyUp2($event.keyCode,newValue,sample.pprocesses,process)"
								ng-show="experimentCtrl.getPlannedProcess(process,sample.pprocesses).edit" type="text"
							    ng-model="newValue"
							    ng-blur="experimentCtrl.getPlannedProcess(process,sample.pprocesses).edit=false"> 	    
							    <span ng-hide="experimentCtrl.getPlannedProcess(process,sample.pprocesses).edit||
							    experimentCtrl.getPlannedProcess(process,sample.pprocesses).trnote">
							     -
							    </span>
							    <span ng-hide="experimentCtrl.getPlannedProcess(process,sample.pprocesses).edit">
							    {{experimentCtrl.getPlannedProcess(process,sample.pprocesses).trnote}}
							    </span>
								)
							</span>
							</span>
				  		</td>
			  		</tr>
			  		
			  		<tr>
				  		<td>
				  			<button type="button" 
				  					class="btn btn-default btn-xs" 
				  					ng-click="experimentCtrl.addSample()" >
								<b>+</b> {{'Add Sample'|translate}}
							</button>
						</td>
						<td>
						</td>
						<td ng-repeat="process in  experimentCtrl.experiment.processes | orderBy : 'position'">
							<button class="btn btn-default btn-xs" 
									ng-click="experimentCtrl.markColumn(process.id)">
								{{'Mark all'|translate}} &#10003;
							</button>
						</td>
			  		</tr>
				</table>
			</div>
		</div>
		<br />
		<button ng-show="experimentCtrl.editmode=='true'" class="btn btn-default btn-sm" 
							ui-sref="experiment({experimentID:experimentCtrl.experiment.id,editmode:'false'})">
						{{'Finished'|translate}}
					</button>

		<button ng-show="experimentCtrl.editmode!='true'" 
				class="btn btn-default" 
				ui-sref="experiment({experimentID:experimentCtrl.experiment.id,editmode:'true'})">
			{{'Edit Experiment'|translate}}
		</button>
		